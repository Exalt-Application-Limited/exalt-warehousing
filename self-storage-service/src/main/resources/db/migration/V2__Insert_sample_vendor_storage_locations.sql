-- Sample data for vendor storage locations
-- This provides realistic test data for development and demonstration

-- Insert sample vendor storage locations
INSERT INTO vendor_storage_locations (
    id, vendor_id, vendor_name, location_name, storage_type, status,
    street_address, address_line_2, city, state, postal_code, country,
    latitude, longitude,
    contact_name, contact_phone, contact_email,
    storage_area_sqft, current_utilization, max_weight_capacity,
    has_climate_control, target_temperature, target_humidity,
    has_security, security_features,
    opening_time, closing_time, operating_days, is_24_7,
    pickup_instructions,
    avg_processing_time, fulfillment_rate, performance_score,
    total_orders_processed, verification_date,
    notes, created_at, updated_at
) VALUES 
-- Vendor 1: TechStart Solutions (Multiple locations)
(
    'f47ac10b-58cc-4372-a567-0e02b2c3d479',
    'vendor-001',
    'TechStart Solutions',
    'Main Warehouse',
    'COMMERCIAL_WAREHOUSE',
    'ACTIVE',
    '1234 Industrial Blvd',
    'Suite 100',
    'Los Angeles',
    'California',
    '90021',
    'USA',
    34.0522, -118.2437,
    'John Rodriguez',
    '+1-555-0123',
    'john.rodriguez@techstart.com',
    2500, 75, 50000,
    true, 70, 50,
    true, 'Security cameras, keypad entry, motion sensors',
    '07:00:00', '19:00:00', 'Monday-Friday', false,
    'Loading dock B, use buzzer 101 for access. Forklift available.',
    18.5, 96.2, 92.5,
    847, '2024-01-15 10:30:00+00',
    'High-performing location with excellent courier access.',
    '2024-01-10 09:00:00+00', '2024-06-01 14:30:00+00'
),
(
    'f47ac10b-58cc-4372-a567-0e02b2c3d480',
    'vendor-001',
    'TechStart Solutions',
    'Backup Storage',
    'COMMERCIAL_UNIT',
    'ACTIVE',
    '5678 Storage Way',
    'Unit 45',
    'Los Angeles',
    'California',
    '90045',
    'USA',
    33.9425, -118.4081,
    'Maria Garcia',
    '+1-555-0124',
    'maria.garcia@techstart.com',
    800, 60, 15000,
    false, null, null,
    true, 'PIN code access, basic alarm system',
    '08:00:00', '18:00:00', 'Monday-Saturday', false,
    'Use entrance C, call 30 minutes before arrival.',
    24.2, 94.1, 87.3,
    312, '2024-02-01 11:45:00+00',
    'Secondary location for overflow inventory.',
    '2024-01-25 11:15:00+00', '2024-06-01 16:20:00+00'
),

-- Vendor 2: HomeStyle Crafts (Home-based storage)
(
    'f47ac10b-58cc-4372-a567-0e02b2c3d481',
    'vendor-002',
    'HomeStyle Crafts',
    'Home Workshop',
    'HOME_GARAGE',
    'ACTIVE',
    '789 Maple Street',
    null,
    'Portland',
    'Oregon',
    '97205',
    'USA',
    45.5152, -122.6784,
    'Sarah Chen',
    '+1-555-0201',
    'sarah@homestyle-crafts.com',
    400, 85, 5000,
    false, null, null,
    false, null,
    '09:00:00', '17:00:00', 'Monday-Friday', false,
    'Residential area - please park in driveway and ring doorbell.',
    12.3, 98.7, 94.1,
    156, '2024-01-20 14:15:00+00',
    'Home-based artisan with excellent customer service.',
    '2024-01-15 13:45:00+00', '2024-06-01 09:10:00+00'
),

-- Vendor 3: GreenLeaf Organics (Climate controlled)
(
    'f47ac10b-58cc-4372-a567-0e02b2c3d482',
    'vendor-003',
    'GreenLeaf Organics',
    'Climate Facility',
    'CLIMATE_CONTROLLED',
    'ACTIVE',
    '456 Farm Road',
    'Building A',
    'Sacramento',
    'California',
    '95814',
    'USA',
    38.5816, -121.4944,
    'Mike Thompson',
    '+1-555-0301',
    'mike@greenleaf-organics.com',
    1200, 70, 25000,
    true, 68, 45,
    true, 'Temperature monitoring, humidity control, organic certification',
    '06:00:00', '20:00:00', 'Monday-Sunday', false,
    'Organic products only. Temperature-sensitive items in bay 1-3.',
    16.8, 99.1, 96.7,
    423, '2024-01-08 08:20:00+00',
    'Specialized facility for organic and temperature-sensitive products.',
    '2024-01-05 07:30:00+00', '2024-06-01 12:45:00+00'
),

-- Vendor 4: Urban Fashion Hub (Retail store)
(
    'f47ac10b-58cc-4372-a567-0e02b2c3d483',
    'vendor-004',
    'Urban Fashion Hub',
    'Store Backroom',
    'RETAIL_BACK_ROOM',
    'ACTIVE',
    '321 Fashion Ave',
    null,
    'San Francisco',
    'California',
    '94102',
    'USA',
    37.7749, -122.4194,
    'Lisa Wong',
    '+1-555-0401',
    'lisa@urbanfashionhub.com',
    600, 90, 8000,
    true, 72, 50,
    true, 'Store security system, after-hours access available',
    '10:00:00', '22:00:00', 'Monday-Sunday', false,
    'Enter through rear entrance after store hours. Use intercom for access.',
    21.5, 92.8, 89.2,
    267, '2024-02-10 16:30:00+00',
    'Fashion retailer with convenient downtown location.',
    '2024-02-05 15:20:00+00', '2024-06-01 18:15:00+00'
),

-- Vendor 5: FlexiSpace Solutions (Shared warehouse)
(
    'f47ac10b-58cc-4372-a567-0e02b2c3d484',
    'vendor-005',
    'FlexiSpace Solutions',
    'Shared Facility North',
    'SHARED_WAREHOUSE',
    'ACTIVE',
    '999 Commerce Dr',
    'Section D',
    'Seattle',
    'Washington',
    '98101',
    'USA',
    47.6062, -122.3321,
    'David Kim',
    '+1-555-0501',
    'david@flexispace.com',
    1500, 80, 30000,
    false, null, null,
    true, 'Shared security system, individual unit access codes',
    '07:00:00', '19:00:00', 'Monday-Saturday', false,
    'Shared facility - check in at front desk. Section D is third aisle.',
    19.7, 95.4, 91.8,
    534, '2024-01-30 13:25:00+00',
    'Cost-effective shared warehouse solution.',
    '2024-01-28 10:40:00+00', '2024-06-01 11:30:00+00'
),

-- Vendor 6: BookWorm Collective (Home spare room)
(
    'f47ac10b-58cc-4372-a567-0e02b2c3d485',
    'vendor-006',
    'BookWorm Collective',
    'Home Library',
    'HOME_SPARE_ROOM',
    'ACTIVE',
    '147 Oak Lane',
    'Apt 2B',
    'Austin',
    'Texas',
    '78701',
    'USA',
    30.2672, -97.7431,
    'Emma Davis',
    '+1-555-0601',
    'emma@bookworm-collective.com',
    200, 95, 2000,
    true, 70, 45,
    false, null,
    '10:00:00', '18:00:00', 'Tuesday-Saturday', false,
    'Apartment building - use buzzer #2B. Elevator to second floor.',
    8.5, 99.5, 97.2,
    89, '2024-02-15 12:10:00+00',
    'Specialty bookstore with climate-controlled rare book storage.',
    '2024-02-12 11:30:00+00', '2024-06-01 15:45:00+00'
),

-- Vendor 7: FreshMart Express (Cold storage)
(
    'f47ac10b-58cc-4372-a567-0e02b2c3d486',
    'vendor-007',
    'FreshMart Express',
    'Cold Storage Unit',
    'COLD_STORAGE',
    'ACTIVE',
    '852 Refrigeration Rd',
    'Unit 12',
    'Phoenix',
    'Arizona',
    '85001',
    'USA',
    33.4484, -112.0740,
    'Carlos Mendez',
    '+1-555-0701',
    'carlos@freshmart-express.com',
    1000, 65, 20000,
    true, 38, 80,
    true, 'Refrigeration monitoring, backup power, temperature alarms',
    '05:00:00', '21:00:00', 'Monday-Sunday', false,
    'Frozen/refrigerated items only. Loading dock has freezer access.',
    22.1, 97.3, 93.6,
    198, '2024-01-12 09:45:00+00',
    'Specialized cold storage for perishable goods.',
    '2024-01-10 08:15:00+00', '2024-06-01 13:20:00+00'
),

-- Vendor 8: Artisan Corner (Retail store)
(
    'f47ac10b-58cc-4372-a567-0e02b2c3d487',
    'vendor-008',
    'Artisan Corner',
    'Gallery Storage',
    'RETAIL_STORE',
    'CAPACITY_FULL',
    '741 Arts District',
    null,
    'Denver',
    'Colorado',
    '80202',
    'USA',
    39.7392, -104.9903,
    'Rachel Martinez',
    '+1-555-0801',
    'rachel@artisan-corner.com',
    800, 100, 12000,
    true, 68, 45,
    true, 'Gallery security, humidity control for artwork',
    '11:00:00', '20:00:00', 'Wednesday-Sunday', false,
    'Art gallery - handle all items with care. Fragile artwork storage area.',
    15.2, 94.7, 88.9,
    145, '2024-02-20 14:50:00+00',
    'Art gallery at full capacity, excellent care for fragile items.',
    '2024-02-18 13:25:00+00', '2024-06-01 17:10:00+00'
),

-- Vendor 9: TechGear Pro (Under verification)
(
    'f47ac10b-58cc-4372-a567-0e02b2c3d488',
    'vendor-009',
    'TechGear Pro',
    'New Warehouse',
    'COMMERCIAL_WAREHOUSE',
    'VERIFICATION',
    '963 Technology Park',
    'Building C',
    'San Jose',
    'California',
    '95110',
    'USA',
    37.3382, -121.8863,
    'Alex Johnson',
    '+1-555-0901',
    'alex@techgear-pro.com',
    3000, 0, 75000,
    true, 70, 50,
    true, 'Advanced security system, climate zones, loading docks',
    '06:00:00', '22:00:00', 'Monday-Saturday', false,
    'New facility under verification. Multiple loading bays available.',
    0.0, 100.0, 85.0,
    0, null,
    'Large facility currently under verification process.',
    '2024-05-20 16:30:00+00', '2024-06-01 20:25:00+00'
),

-- Vendor 10: Suspended vendor example
(
    'f47ac10b-58cc-4372-a567-0e02b2c3d489',
    'vendor-010',
    'Problem Vendor Inc',
    'Suspended Location',
    'COMMERCIAL_UNIT',
    'SUSPENDED',
    '555 Violation St',
    null,
    'Las Vegas',
    'Nevada',
    '89101',
    'USA',
    36.1699, -115.1398,
    'Tom Wilson',
    '+1-555-1001',
    'tom@problemvendor.com',
    1200, 45, 25000,
    false, null, null,
    false, null,
    '09:00:00', '17:00:00', 'Monday-Friday', false,
    'Currently suspended - no pickup access available.',
    35.8, 78.2, 65.4,
    67, '2024-01-05 10:15:00+00',
    'Location suspended due to compliance violations - under review.',
    '2024-01-01 12:00:00+00', '2024-05-15 14:40:00+00'
);

-- Update statistics for better query planning
ANALYZE vendor_storage_locations;

-- Create a summary view for reporting
CREATE OR REPLACE VIEW vendor_storage_summary AS
SELECT 
    vendor_id,
    vendor_name,
    COUNT(*) as total_locations,
    COUNT(*) FILTER (WHERE status = 'ACTIVE') as active_locations,
    COUNT(*) FILTER (WHERE status = 'CAPACITY_FULL') as full_locations,
    COUNT(*) FILTER (WHERE status = 'VERIFICATION') as pending_verification,
    COUNT(*) FILTER (WHERE status = 'SUSPENDED') as suspended_locations,
    SUM(storage_area_sqft) as total_capacity_sqft,
    AVG(current_utilization) as avg_utilization,
    AVG(performance_score) as avg_performance_score,
    SUM(total_orders_processed) as total_orders_processed,
    MAX(last_pickup_date) as last_activity_date
FROM vendor_storage_locations 
WHERE is_deleted = false
GROUP BY vendor_id, vendor_name;

-- Add comment on the view
COMMENT ON VIEW vendor_storage_summary IS 'Summary statistics for vendor storage locations grouped by vendor';

-- Create indexes on the view's commonly queried columns
-- (Note: Indexes on views are not directly supported in PostgreSQL, 
--  but the underlying table indexes will be used)